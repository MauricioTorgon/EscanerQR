<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Escaneo de QR</title>
  <link rel="stylesheet" href="css/bootstrap.min.css" />
  <link rel="stylesheet" href="css/styles.css" />
  <script src="js/jquery-3.6.0.min.js"></script>
  <script src="js/script.js"></script>
</head>
<body>
  <!-- Header con botón de menú -->
  <header>
    <button id="menu-toggle" class="menu-button">☰</button>
    <h1>Control de Asistencia</h1>
</header>

  <!-- Menú lateral (drawer) -->
  <nav id="sidebar" class="sidebar">
    <img src="img/sidebar/controlAsistencia.png" alt="Torneo de Rubick" class="sideimg">
    <ul>
      <li><a href="bienvenida.html"><img src="img/sidebar/home-icon.png" class="menu-img">Inicio</a></li>
      <li><a href="preparaQR.html"><img src="img/sidebar/scanqr-icon.png" class="menu-img">Escanear QR</a></li>
      <li><a href="asistencias.html"><img src="img/sidebar/asistencias-icon.png" class="menu-img">Asistencias</a></li>
      <li><a href="generarQR.html"><img src="img/sidebar/qr-icon.png" class="menu-img">Mi QR</a></li>
      <li><a href="#" id="logout-link"><img src="img/sidebar/logout-icon.png" alt="Salir" class="menu-img">Salir</a></li>
    </ul>
  </nav>
  
  <!-- Contenido principal -->
  <main class="main-content">
    <!-- Pantalla inicial -->
    <div class="container" id="welcome-container">
      <h2>Prepara para analizar el QR</h2>
      <p>Pulsa el botón para iniciar la cámara y escanear tu código.</p>
      <button class="btn-submit" id="start-scan">Iniciar escaneo</button>
    </div>

    <!-- Lector QR -->
    <div id="reader-wrapper" style="display: none; flex-direction: column; align-items: center;">
      <div id="reader"></div>
      <div id="scan-message" style="margin-top: 1rem; font-weight: bold;"></div>
    </div>
  </main>

  <!-- Librería del lector QR y script personalizado -->
  <script src="./node_modules/html5-qrcode/html5-qrcode.min.js"></script>
  <script src="js/qr-script.js"></script>
  
  <!-- Logout de la pagina-->
  <script>
    document.getElementById('logout-link').addEventListener('click', function(e) {
    e.preventDefault();
    if (confirm("¿Estás seguro de que quieres salir?")) {
      localStorage.removeItem('currentUser');
      window.location.href = "index.html";
    }
  });
  </script>
</body>
</html>
